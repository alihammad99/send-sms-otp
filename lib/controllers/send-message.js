exports.__esModule=!0,exports.sendMessage=void 0;var _generateOtp=require("../middlewares/generate-otp.js"),_sendSms=require("../middlewares/send-sms.js"),_error=_interopRequireDefault(require("../utils/error.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}const sendMessage=async function(e){const{phoneNumber:r,otpLength:s,expiresIn:t}=e,n=e.environment||process.env.NODE_ENV||"development";let o=0;s>0&&s<13?o=(0,_generateOtp.generateOTP)(r,s,t||30):(0,_error.default)("OTP length must be between 1 and 12",n,"error");const a={...e,env:n,otp:o},d="accepted"===(await(0,_sendSms.sendSMS)(a)).status;return d?(0,_error.default)(`Message Sent! OTP code: ${o}`,n):(0,_error.default)("Failed to send message!",n,"error"),d};exports.sendMessage=sendMessage;